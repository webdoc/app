

The webdoc app API


Methods



.ready(fn)

The app API loads in two stages. Functions passed into .ready() will be fired as soon as the full app API is ready to use. If the app API is already ready, the passed function will fire immediately.

Note that this does not mean that the DOM is ready.



.bind(type, function)

Bind a handler function to be called whenever an event of type is emitted by webdoc. For a full list of events, see webdoc events.



.unbind(type [, function])

Unbind a handler function from events of this type. Where more than one instance of the given handler function is bound to the event, they are all removed.

If no function is provided, all handler functions are unbound from this event.



.insertImage(url, [position])

Inserts an image into the webdoc. URL is the path to the image to be inserted.

If an optional position object is passed the image will be inserted at that position, otherwise the position will be calculated automatically. A position object should look like this:

{
  top: n,
  left: m
}

...where values for n and m are distances in pixels.



.insertItem(url, [position])

Inserts an item into the webdoc. The type of item is determined by the resource that the URL points to. If it is a YouTube link, the item will be a video. If it is an image, the item will be an image.

Webdoc accepts various item types:

Image
Video
Googlemap

If an optional position object is passed the image will be inserted at that position, otherwise the position will be calculated automatically.



.insertWidget(name, preferences, [position])

Inserts a widget into a webdoc, where name is the widget's name and preferences is key value object of options to pass to the widget.

If an optional position object is passed the image will be inserted at that position, otherwise the position will be calculated automatically.

See webdoc widgets for a list of widgets and their preferences.



.fbGraphAPI(path, verb, params, callback)

When the current user is connected to Facebook, fbGraphAPI returns some data about his facebook something.




.t(key, options)

A function for translating strings.



request(url, options)
The request method allow you to made cross domain request by passing through the webdoc proxy. It return both the response and the header.

The options object can have the following properties:

- type: 'GET'
- data: object of key-value pairs to be added to the request
- postData: object
- callback: fn(data), called with a single object as an argument on completion of the request. The data object has the proeprties

- status: The status code of the response (200, 404, ...)
- response: The data returned from the server (HTML, XML, JSON, ...)
- header: An object containing the header returned by the proxy



Properties

user

Object that represents the current user. A user object may have the following properties:

- avatar_thumb_url
- bio
- birthday
- created_at
- documents_count
- first_name
- followers_count
- following_count
- gender
- has_facebook_token
- has_the_orchard_account
- has_twitter_token
- id
- is_admin
- is_safe
- last_name
- registration
- user_type
- username
- uuid
- website


host

Domain name where the app is hosted


lang

The current language that webdoc's user interface is set to. Note that this is not the language that the webdoc may be written in.







Webdoc events



ready
The ready event fires when the full webdoc app API is available.

See also the .ready() method, which will call callbacks immediately if the app has already entered ready state.



selectionchange
Triggered when the selected items in the webdoc change. Handler functions are passed one argument: an array of currently selected items. If the selection has changed so that nothing is selected, the array will be empty.